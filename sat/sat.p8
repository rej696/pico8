pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

me = {}

asteroids = {
   asteroid_1 = {},
   asteroid_2 = {},
   asteroid_3 = {},
   asteroid_4 = {},
}

function init_asteroid(self)
   self.sprite = 1
   self.x = rnd(128)
   self.y = rnd(128)
end

function render(self)
 spr(self.sprite, self.x, self.y)
end

function _init()
   cls()
   me.sprite = 2
   me.x = 64
   me.y = 64
   apply(init_asteroid, asteroids)
end

function move(self)
   if (btn(0)) self.x -= 1
   if (btn(1)) self.x += 1
   if (btn(2)) self.y -= 1
   if (btn(3)) self.y += 1
end

function rand_move(self)
   switch = ceil(rnd(4))
   if (switch == 1) self.x -= 1
   if (switch == 2) self.x += 1
   if (switch == 3) self.y -= 1
   if (switch == 4) self.y += 1
end

function apply(func, tbl)
   for _,x in pairs(tbl) do
     func(x)
   end
end   

function _update()
   move(me)
   
   apply(rand_move, asteroids)
end

function _draw()
   cls()
   render(me)
   apply(render, asteroids)
--   render(asteroids.asteroid_1)
   
--   for a in ipairs(asteroids) do
--     render(a)
--   end 
end
__gfx__
00000000000000000008200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006660000005500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700066666000055550a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000066606000056655a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700006666600d256650a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700006660000056755a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000055550a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
